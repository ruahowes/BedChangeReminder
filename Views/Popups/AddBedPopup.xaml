<?xml version="1.0" encoding="utf-8" ?>
<toolkit:Popup xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
               xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
               xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
               x:Class="BedChangeReminder.Views.Popups.AddBedPopup"
               CanBeDismissedByTappingOutsideOfPopup="True">

    <Grid BackgroundColor="{StaticResource Black}" Opacity="0.7" Padding="20">
        <Frame BackgroundColor="{StaticResource White}" 
               CornerRadius="20" 
               BorderColor="DarkSlateGray" 
               Padding="20" 
               HasShadow="True" 
               HorizontalOptions="Center" 
               VerticalOptions="Center"
               MaximumWidthRequest="350"
               Opacity="1.0">

            <ScrollView>
                <StackLayout Spacing="15">
                    <!-- Header -->
                    <Label Text="Add New Bed" 
                           FontSize="22"
                           FontAttributes="Bold"
                           VerticalOptions="Center" 
                           HorizontalOptions="Center" 
                           TextColor="DarkSlateGray" />

                    <!-- Bed Name -->
                    <StackLayout Spacing="5">
                        <Label Text="Bed Name:" FontAttributes="Bold" TextColor="Black" />
                        <Frame BackgroundColor="White" BorderColor="LightGray" CornerRadius="5" Padding="5">
                            <Entry Text="{Binding NewBed.Name}" 
                                   Placeholder="Enter Bed Name" 
                                   TextColor="Black" 
                                   BackgroundColor="Transparent"
                                   FontSize="16" />
                        </Frame>
                    </StackLayout>

                    <!-- Frequency -->
                    <StackLayout Spacing="5">
                        <Label Text="Change Frequency (days):" FontAttributes="Bold" TextColor="Black" />
                        <Frame BackgroundColor="White" BorderColor="LightGray" CornerRadius="5" Padding="5">
                            <Entry Text="{Binding NewBed.Frequency}" 
                                   Placeholder="Enter frequency in days" 
                                   Keyboard="Numeric" 
                                   TextColor="Black" 
                                   BackgroundColor="Transparent"
                                   FontSize="16" />
                        </Frame>
                    </StackLayout>

                    <!-- Last Change Date -->
                    <StackLayout Spacing="5">
                        <Label Text="Last Change Date:" FontAttributes="Bold" TextColor="Black" />
                        <Frame BackgroundColor="White" BorderColor="LightGray" CornerRadius="5" Padding="5">
                            <DatePicker Date="{Binding NewBed.LastChangeDate}" 
                                       Format="dd/MM/yyyy" 
                                       TextColor="Black" 
                                       BackgroundColor="Transparent"
                                       FontSize="16" />
                        </Frame>
                    </StackLayout>

                    <!-- Last Action Selection -->
                    <StackLayout Spacing="5">
                        <Label Text="Last Action Performed:" FontAttributes="Bold" TextColor="Black" />
                        <Grid ColumnDefinitions="*,*,*" ColumnSpacing="8">
                            <Button Grid.Column="2"
                                    Text="None" 
                                    Command="{Binding SelectNoneCommand}" 
                                    BackgroundColor="{Binding TempSelectedAction, Converter={StaticResource BedActionConverter}, ConverterParameter='None'}" 
                                    TextColor="White"
                                    FontSize="12"
                                    HeightRequest="40" />
                            <Button Grid.Column="0"
                                    Text="Flip" 
                                    Command="{Binding SelectFlipCommand}" 
                                    BackgroundColor="{Binding TempSelectedAction, Converter={StaticResource BedActionConverter}, ConverterParameter='Flip'}" 
                                    TextColor="White"
                                    FontSize="12"
                                    HeightRequest="40" />
                            <Button Grid.Column="1"
                                    Text="Rotate" 
                                    Command="{Binding SelectRotateCommand}" 
                                    BackgroundColor="{Binding TempSelectedAction, Converter={StaticResource BedActionConverter}, ConverterParameter='Rotate'}" 
                                    TextColor="White"
                                    FontSize="12"
                                    HeightRequest="40" />
                        </Grid>
                    </StackLayout>

                    <!-- Additional Items -->
                    <StackLayout Spacing="8">
                        <Label Text="Also changed on this date?" FontAttributes="Bold" TextColor="Black" />

                        <Grid ColumnDefinitions="Auto,*" ColumnSpacing="10">
                            <CheckBox Grid.Column="0"
                                      IsChecked="{Binding ChangedMattressProtector}"
                                      Color="Green"
                                      VerticalOptions="Center" />
                            <Label Grid.Column="1"
                                   Text="Mattress protector"
                                   VerticalOptions="Center"
                                   TextColor="Black"
                                   FontSize="15" />
                        </Grid>

                        <Grid ColumnDefinitions="Auto,*" ColumnSpacing="10">
                            <CheckBox Grid.Column="0"
                                      IsChecked="{Binding ChangedPillowLiner}"
                                      Color="Green"
                                      VerticalOptions="Center" />
                            <Label Grid.Column="1"
                                   Text="Pillow liners"
                                   VerticalOptions="Center"
                                   TextColor="Black"
                                   FontSize="15" />
                        </Grid>
                    </StackLayout>

                    <!-- Action Buttons -->
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="15" Margin="0,20,0,0">
                        <Button Grid.Column="0"
                                Text="Add Bed" 
                                Command="{Binding ConfirmCommand}" 
                                BackgroundColor="Green" 
                                TextColor="White"
                                FontSize="16"
                                HeightRequest="50"
                                CornerRadius="10" />
                        <Button Grid.Column="1"
                                Text="Cancel" 
                                Command="{Binding CancelCommand}" 
                                BackgroundColor="Red" 
                                TextColor="White"
                                FontSize="16"
                                HeightRequest="50"
                                CornerRadius="10" />
                    </Grid>
                </StackLayout>
            </ScrollView>
        </Frame>
    </Grid>
</toolkit:Popup>