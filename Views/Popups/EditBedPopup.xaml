<?xml version="1.0" encoding="utf-8" ?>
<toolkit:Popup xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
               xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
               xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
               x:Class="BedChangeReminder.Views.Popups.EditBedPopup"
               CanBeDismissedByTappingOutsideOfPopup="True">

    <ScrollView>
        <Grid BackgroundColor="Black" Opacity="0.4" Padding="20">
            <Frame BackgroundColor="White"
                   CornerRadius="20"
                   BorderColor="DarkSlateGray"
                   Padding="20"
                   HasShadow="True"
                   HorizontalOptions="Center"
                   VerticalOptions="Center"
                   MaximumWidthRequest="400">

                <StackLayout Spacing="15">
                    <!-- Header -->
                    <Label Text="Edit Bed"
                           FontSize="20"
                           FontAttributes="Bold"
                           VerticalOptions="Center"
                           HorizontalOptions="Center"
                           TextColor="DarkSlateGray" />

                    <!-- Bed Name -->
                    <Frame BackgroundColor="LightGray" CornerRadius="10" Padding="10">
                        <StackLayout>
                            <Label Text="Bed Name:" FontAttributes="Bold" TextColor="Black" />
                            <Entry Text="{Binding EditableBed.Name}" 
                                   TextColor="Black" 
                                   BackgroundColor="White"
                                   FontSize="16" />
                        </StackLayout>
                    </Frame>

                    <!-- Frequency -->
                    <Frame BackgroundColor="LightGray" CornerRadius="10" Padding="10">
                        <StackLayout>
                            <Label Text="Change Frequency (days):" FontAttributes="Bold" TextColor="Black" />
                            <Entry Text="{Binding EditableBed.Frequency}" 
                                   TextColor="Black" 
                                   BackgroundColor="White"
                                   Keyboard="Numeric"
                                   FontSize="16" />
                        </StackLayout>
                    </Frame>

                    <!-- Last Change Date -->
                    <Frame BackgroundColor="LightGray" CornerRadius="10" Padding="10">
                        <StackLayout>
                            <Label Text="Last Change Date:" FontAttributes="Bold" TextColor="Black" />
                            <DatePicker Date="{Binding EditableBed.LastChangeDate}" 
                                       TextColor="Black" 
                                       BackgroundColor="White"
                                       FontSize="16" />
                        </StackLayout>
                    </Frame>

                    <!-- Last Action Selection -->
                    <Frame BackgroundColor="LightGray" CornerRadius="10" Padding="10">
                        <StackLayout>
                            <Label Text="Last Action Performed:" FontAttributes="Bold" TextColor="Black" />
                            <Grid ColumnDefinitions="*,*,*" ColumnSpacing="5">
                                <Button Grid.Column="0"
                                        Text="None" 
                                        Command="{Binding SelectNoneCommand}" 
                                        BackgroundColor="{Binding TempSelectedAction, Converter={StaticResource BedActionConverter}, ConverterParameter='None'}" 
                                        TextColor="White"
                                        FontSize="14" />
                                <Button Grid.Column="1"
                                        Text="Flip" 
                                        Command="{Binding SelectFlipCommand}" 
                                        BackgroundColor="{Binding TempSelectedAction, Converter={StaticResource BedActionConverter}, ConverterParameter='Flip'}" 
                                        TextColor="White"
                                        FontSize="14" />
                                <Button Grid.Column="2"
                                        Text="Rotate" 
                                        Command="{Binding SelectRotateCommand}" 
                                        BackgroundColor="{Binding TempSelectedAction, Converter={StaticResource BedActionConverter}, ConverterParameter='Rotate'}" 
                                        TextColor="White"
                                        FontSize="14" />
                            </Grid>
                        </StackLayout>
                    </Frame>

                    <!-- Action Buttons -->
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="10" Margin="0,10,0,0">
                        <Button Grid.Column="0"
                                Text="Save Changes" 
                                Command="{Binding ConfirmCommand}" 
                                BackgroundColor="Green" 
                                TextColor="White"
                                FontSize="16"
                                HeightRequest="45" />
                        <Button Grid.Column="1"
                                Text="Cancel" 
                                Command="{Binding CancelCommand}" 
                                BackgroundColor="Red" 
                                TextColor="White"
                                FontSize="16"
                                HeightRequest="45" />
                    </Grid>
                </StackLayout>
            </Frame>
        </Grid>
    </ScrollView>
</toolkit:Popup>
